<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday My Love!</title>
    <style>
        :root {
          --coilSize: 14px;
          --delayCount: 40ms;
          --scaleMe: 1;
          --scaleFlip: 1;
          --posFlip: 0;
          --primary-color: #ff6b6b;
          --secondary-color: #ffb8b8;
        }
        
        body {
          margin: 0;
          padding: 0;
          font-family: 'Arial', sans-serif;
          background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
          overflow-x: hidden;
          min-height: 100vh;
          display: flex;
          justify-content: center;
          align-items: center;
          position: relative;
        }
        
        .container {
          position: relative;
          z-index: 10;
          text-align: center;
          padding: 2rem;
          background: rgba(255, 255, 255, 0.85);
          border-radius: 20px;
          box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
          max-width: 800px;
          animation: fadeIn 2s ease-in-out;
          backdrop-filter: blur(5px);
          margin: 2rem;
        }
        
        h1 {
          font-size: 4rem;
          margin-bottom: 1rem;
          color: var(--primary-color);
          text-shadow: 3px 3px 0px rgba(0, 0, 0, 0.1);
          animation: pulse 2s infinite;
          font-family: 'Brush Script MT', cursive;
        }
        
        .message {
          font-size: 1.5rem;
          line-height: 1.6;
          margin-bottom: 2rem;
          color: #333;
        }
        
        .btn {
          display: inline-block;
          padding: 1rem 2rem;
          background: var(--primary-color);
          color: white;
          border-radius: 50px;
          text-decoration: none;
          font-weight: bold;
          font-size: 1.2rem;
          transition: all 0.3s ease;
          box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
          animation: bounce 2s infinite;
          border: none;
          cursor: pointer;
          margin: 0.5rem;
        }
        
        .btn:hover {
          transform: translateY(-5px);
          box-shadow: 0 10px 20px rgba(255, 107, 107, 0.6);
          background: #ff5252;
        }
        
        .btn-secondary {
          background: var(--secondary-color);
          box-shadow: 0 5px 15px rgba(255, 184, 184, 0.4);
        }
        
        .btn-secondary:hover {
          background: #ffa8a8;
          box-shadow: 0 10px 20px rgba(255, 184, 184, 0.6);
        }
        
        /* Koi Fish Animation - Fixed */
        .fish-container {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          z-index: 1;
          overflow: hidden;
        }
        
        .seaLevel {
          font-family: "Open Sans", sans-serif;
          background-color: lightblue;
          position: absolute;
          width: 100%;
          height: 100%;
          top: 0;
          left: 0;
          opacity: 0.4;
        }
        
        .fish {
          position: absolute;
          width: 100%;
          height: 100%;
          filter: drop-shadow(
            calc(var(--coilSize) * 4) calc(var(--coilSize) / 3) 5px rgba(0, 0, 0, 0.3)
          );
        }
        
        .fish .koiCoil {
          position: absolute;
          width: var(--coilSize);
          height: var(--coilSize);
          background-color: orangered;
          border-radius: 50%;
          top: 50%;
          left: 50%;
          margin-left: calc(var(--coilSize) / -2);
          margin-top: calc(var(--coilSize) / -2);
          transform: scale(var(--scaleMe), var(--scaleMe));
          filter: contrast(200%);
          offset-path: path(
            "M11.7692 229.5C14.552 200.052 7.51901 171.858 -42.8757 170.644C-105.869 169.128 -131.294 76.612 -101.695 51.5872C-72.0955 26.5625 -24.6607 -50.7867 70.5883 51.5872C165.837 153.961 27.7073 131.211 33.0199 183.157C38.3326 235.102 90.3211 195.669 139.274 223.727C188.226 251.785 207.959 299.56 139.274 316.243C70.5883 332.926 41.3685 398.9 81.9726 419.754C122.577 440.608 222 478.524 222 419.754C222 372.738 222 242.432 222 183.157C219.091 129.948 175.78 30.8091 25.8099 59.9288C-161.652 96.3284 -30.3529 119.837 25.8099 141.07C81.9726 162.303 171.529 204.769 126.751 260.506C81.9726 316.243 101.326 362.501 139.274 373.496C177.222 384.492 170.012 464.495 70.5883 462.979C-28.835 461.462 -42.8757 393.015 -42.8757 373.496C-42.8757 238.288 11.7692 293 11.7692 240.506C11.7692 208.05 11.7692 237.336 11.7692 229.5Z"
          );
          animation: fishAnim 20000ms linear infinite;
          box-shadow: calc(var(--coilSize) / -2) calc(var(--coilSize) / -10) 0 white
            inset;
        }
        
        .fish:nth-of-type(2) {
          transform-origin: top center;
          transform: scale(-1, 1);
          filter: drop-shadow(
            calc(var(--coilSize) * -4) calc(var(--coilSize) / 3) 5px rgba(0, 0, 0, 0.3)
          );
        }
        
        .fish:nth-of-type(2) .koiCoil {
          background-color: white;
          box-shadow: calc(var(--coilSize) / -2) calc(var(--coilSize) / -10) 0 orangered
            inset;
        }
        
        .fish .koiCoil:nth-of-type(15),
        .fish .koiCoil:nth-of-type(14) {
          background-color: orangered;
        }
        
        .fish:nth-of-type(2) .koiCoil:nth-of-type(15),
        .fish:nth-of-type(2) .koiCoil:nth-of-type(14) {
          background-color: white;
        }
        
        .fish .koiCoil:nth-of-type(15)::after {
          content: ":";
          position: absolute;
          color: black;
          font-weight: 800;
          text-align: center;
          line-height: 60%;
          font-size: calc(var(--coilSize) * 1.2);
        }
        
        .fish .koiCoil:nth-of-type(1)::before {
          content: "";
          position: absolute;
          width: 100%;
          height: 50%;
          top: 25%;
          left: -100%;
          border-radius: var(--coilSize);
          background-color: white;
          transform-origin: center right;
          animation: backFlip 200ms ease-in-out alternate infinite;
        }
        
        .fish .koiCoil:nth-of-type(14) {
          --scaleMe: 1.2;
          animation-delay: calc(var(--delayCount) * 1);
        }
        
        .fish .koiCoil:nth-of-type(13) {
          --scaleMe: 1.35;
          animation-delay: calc(var(--delayCount) * 2);
        }
        
        .fish .koiCoil:nth-of-type(12) {
          --scaleMe: 1.55;
          animation-delay: calc(var(--delayCount) * 3);
        }
        
        .fish .koiCoil:nth-of-type(11) {
          --scaleMe: 1.75;
          animation-delay: calc(var(--delayCount) * 4);
        }
        
        .fish .koiCoil:nth-of-type(10) {
          --scaleMe: 1.9;
          animation-delay: calc(var(--delayCount) * 5);
        }
        
        .fish .koiCoil:nth-of-type(9) {
          --scaleMe: 2;
          animation-delay: calc(var(--delayCount) * 6);
        }
        
        .fish .koiCoil:nth-of-type(8) {
          --scaleMe: 2;
          animation-delay: calc(var(--delayCount) * 7);
        }
        
        .fish .koiCoil:nth-of-type(7) {
          --scaleMe: 2;
          animation-delay: calc(var(--delayCount) * 8);
        }
        
        .fish .koiCoil:nth-of-type(6) {
          --scaleMe: 1.9;
          animation-delay: calc(var(--delayCount) * 9);
        }
        
        .fish .koiCoil:nth-of-type(5) {
          --scaleMe: 1.75;
          animation-delay: calc(var(--delayCount) * 10);
        }
        
        .fish .koiCoil:nth-of-type(4) {
          --scaleMe: 1.55;
          animation-delay: calc(var(--delayCount) * 11);
        }
        
        .fish .koiCoil:nth-of-type(3) {
          --scaleMe: 1.35;
          animation-delay: calc(var(--delayCount) * 12);
        }
        
        .fish .koiCoil:nth-of-type(2) {
          --scaleMe: 1.2;
          animation-delay: calc(var(--delayCount) * 13);
        }
        
        .fish .koiCoil:nth-of-type(1) {
          animation-delay: calc(var(--delayCount) * 14);
        }
        
        .fish .koiCoil:nth-of-type(12)::before,
        .fish .koiCoil:nth-of-type(12)::after {
          content: "";
          position: absolute;
          width: 100%;
          height: 20%;
          top: -10%;
          left: -100%;
          border-radius: var(--coilSize);
          background-color: white;
          transform-origin: center right;
          animation: sideFlip 500ms ease-in-out alternate infinite;
        }
        
        .fish .koiCoil:nth-of-type(12)::after {
          --scaleFlip: -1;
          --posFlip: calc(var(--coilSize) * -1);
        }
        
        @keyframes fishAnim {
          0% {
            offset-distance: 0%;
          }
          100% {
            offset-distance: 100%;
          }
        }
        
        @keyframes backFlip {
          0% {
            transform: rotate(45deg);
          }
          100% {
            transform: rotate(-45deg);
          }
        }
        
        @keyframes sideFlip {
          0% {
            transform: scale(1, var(--scaleFlip)) translateY(var(--posFlip))
              rotate(80deg);
          }
          100% {
            transform: scale(1, var(--scaleFlip)) translateY(var(--posFlip))
              rotate(20deg);
          }
        }
        
        /* Additional Animations */
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes pulse {
          0% { transform: scale(1); }
          50% { transform: scale(1.05); }
          100% { transform: scale(1); }
        }
        
        @keyframes bounce {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-10px); }
        }
        
        /* Floating Hearts */
        .hearts {
          position: absolute;
          width: 100%;
          height: 100%;
          top: 0;
          left: 0;
          pointer-events: none;
          z-index: 5;
        }
        
        .heart {
          position: absolute;
          font-size: 1.5rem;
          color: var(--primary-color);
          animation: float 6s ease-in-out infinite;
          opacity: 0;
        }
        
        @keyframes float {
          0% {
            transform: translateY(0) rotate(0deg);
            opacity: 0;
          }
          10% {
            opacity: 1;
          }
          90% {
            opacity: 1;
          }
          100% {
            transform: translateY(-100vh) rotate(360deg);
            opacity: 0;
          }
        }
        
        /* Falling Hearts Animation */
        .falling-hearts {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          pointer-events: none;
          z-index: 20;
        }
        
        .falling-heart {
          position: absolute;
          font-size: 2rem;
          color: var(--primary-color);
          animation: falling 4s linear forwards;
          opacity: 0;
        }
        
        @keyframes falling {
          0% {
            transform: translateY(-10vh) rotate(0deg);
            opacity: 1;
          }
          100% {
            transform: translateY(110vh) rotate(360deg);
            opacity: 0;
          }
        }
        
        /* Confetti */
        .confetti {
          position: absolute;
          width: 10px;
          height: 10px;
          background-color: #f00;
          opacity: 0;
          z-index: 10;
        }
        
        /* Photo Frame */
        .photo-frame {
          width: 200px;
          height: 200px;
          margin: 0 auto 2rem;
          border: 10px solid white;
          border-radius: 10px;
          box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
          overflow: hidden;
          position: relative;
          animation: rotate 20s linear infinite;
          transition: all 0.5s ease;
        }
        
        .photo-frame:hover {
          animation: none;
          transform: scale(1.05);
          box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
        
        .photo-frame img {
          width: 100%;
          height: 100%;
          object-fit: cover;
          transition: transform 0.5s ease;
        }
        
        .photo-frame:hover img {
          transform: scale(1.1);
        }
        
        @keyframes rotate {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
        
        /* Memory Gallery */
        .gallery {
          display: flex;
          flex-wrap: wrap;
          justify-content: center;
          gap: 10px;
          margin: 2rem 0;
          max-height: 0;
          overflow: hidden;
          transition: max-height 0.5s ease;
        }
        
        .gallery.active {
          max-height: 500px;
        }
        
        .gallery-item {
          width: 100px;
          height: 100px;
          border-radius: 10px;
          overflow: hidden;
          box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
          transition: all 0.3s ease;
          cursor: pointer;
        }
        
        .gallery-item:hover {
          transform: scale(1.1);
          box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .gallery-item img {
          width: 100%;
          height: 100%;
          object-fit: cover;
        }
        
        /* Time on Earth Counter */
        .time-on-earth {
          display: flex;
          justify-content: center;
          gap: 15px;
          margin: 1rem 0;
          flex-wrap: wrap;
        }
        
        .time-item {
          background: rgba(255, 255, 255, 0.8);
          padding: 10px;
          border-radius: 10px;
          min-width: 60px;
          box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        .time-number {
          font-size: 1.8rem;
          font-weight: bold;
          color: var(--primary-color);
        }
        
        .time-label {
          font-size: 0.8rem;
          color: #666;
        }
        
        /* Love Meter */
        .love-meter {
          width: 100%;
          height: 20px;
          background: #f0f0f0;
          border-radius: 10px;
          margin: 1rem 0;
          overflow: hidden;
          position: relative;
        }
        
        .love-progress {
          height: 100%;
          width: 100%;
          background: linear-gradient(90deg, var(--secondary-color), var(--primary-color));
          border-radius: 10px;
          position: relative;
          animation: loveProgress 2s ease-in-out forwards;
        }
        
        @keyframes loveProgress {
          from { width: 0; }
          to { width: 100%; }
        }
        
        /* Message Box */
        .message-box {
          position: fixed;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          background: white;
          padding: 2rem;
          border-radius: 15px;
          box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
          z-index: 100;
          max-width: 80%;
          text-align: center;
          display: none;
          animation: fadeIn 0.5s ease;
        }
        
        .message-box.active {
          display: block;
        }
        
        .message-box .btn {
          margin-top: 1rem;
        }
        
        /* Music Player */
        .music-player {
          position: fixed;
          bottom: 20px;
          right: 20px;
          background: white;
          border-radius: 50px;
          padding: 10px 15px;
          box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
          z-index: 100;
          display: flex;
          align-items: center;
          gap: 10px;
        }
        
        .music-player button {
          background: var(--primary-color);
          color: white;
          border: none;
          border-radius: 50%;
          width: 40px;
          height: 40px;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 1.2rem;
        }
        
        .music-player button:hover {
          background: #ff5252;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
          h1 {
            font-size: 2.5rem;
          }
          
          .message {
            font-size: 1.2rem;
          }
          
          .container {
            width: 90%;
            padding: 1rem;
          }
          
          .photo-frame {
            width: 150px;
            height: 150px;
          }
          
          .btn {
            padding: 0.8rem 1.5rem;
            font-size: 1rem;
          }
          
          .music-player {
            bottom: 10px;
            right: 10px;
            padding: 8px 12px;
          }
        }
    </style>
</head>
<body>
    <!-- Fish Container - Fixed Position -->
    <div class="fish-container">
        <div class="seaLevel"></div>
        
        <!-- Koi Fish -->
        <div class="fish">
          <div class="koiCoil"></div>
          <div class="koiCoil"></div>
          <div class="koiCoil"></div>
          <div class="koiCoil"></div>
          <div class="koiCoil"></div>
          <div class="koiCoil"></div>
          <div class="koiCoil"></div>
          <div class="koiCoil"></div>
          <div class="koiCoil"></div>
          <div class="koiCoil"></div>
          <div class="koiCoil"></div>
          <div class="koiCoil"></div>
          <div class="koiCoil"></div>
          <div class="koiCoil"></div>
          <div class="koiCoil"></div>
        </div>
        
        <div class="fish">
          <div class="koiCoil"></div>
          <div class="koiCoil"></div>
          <div class="koiCoil"></div>
          <div class="koiCoil"></div>
          <div class="koiCoil"></div>
          <div class="koiCoil"></div>
          <div class="koiCoil"></div>
          <div class="koiCoil"></div>
          <div class="koiCoil"></div>
          <div class="koiCoil"></div>
          <div class="koiCoil"></div>
          <div class="koiCoil"></div>
          <div class="koiCoil"></div>
          <div class="koiCoil"></div>
          <div class="koiCoil"></div>
        </div>
    </div>
    
    <!-- Floating Hearts -->
    <div class="hearts" id="hearts"></div>
    
    <!-- Falling Hearts Container -->
    <div class="falling-hearts" id="fallingHearts"></div>
    
    <!-- Main Content -->
    <div class="container">
        <h1>Happy Birthday, My Love!</h1>
        
        <div class="photo-frame">
            <!-- Main Photo -->
            <img src="mainphoto.jpeg" alt="Our Photo" id="mainPhoto">
        </div>
        
        <div class="message">
            <p>To the most amazing woman in my life,</p>
            <p>On your special day, I want you to know how much you mean to me.</p>
            <p>You make every moment magical and every day brighter.</p>
            <p>I love you more than words can express! ❤️</p>
        </div>
        
        <!-- Time on Earth Counter -->
        <div class="time-on-earth" id="timeOnEarth">
            <div class="time-item">
                <div class="time-number" id="earthYears">0</div>
                <div class="time-label">Years</div>
            </div>
            <div class="time-item">
                <div class="time-number" id="earthMonths">0</div>
                <div class="time-label">Months</div>
            </div>
            <div class="time-item">
                <div class="time-number" id="earthDays">0</div>
                <div class="time-label">Days</div>
            </div>
            <div class="time-item">
                <div class="time-number" id="earthHours">0</div>
                <div class="time-label">Hours</div>
            </div>
        </div>
        
        <!-- Love Meter -->
        <div class="love-meter">
            <div class="love-progress"></div>
        </div>
        <p style="margin: 0;">How much I love you: Infinite!</p>
        
        <!-- Action Buttons -->
        <div class="button-group">
            <button class="btn" id="surpriseBtn">Click for a Surprise!</button>
            <button class="btn btn-secondary" id="memoriesBtn">Our Memories</button>
            <button class="btn btn-secondary" id="messageBtn">Special Message</button>
        </div>
        
        <!-- Memory Gallery (hidden by default) -->
        <div class="gallery" id="memoryGallery">
            <!-- Memory Photos -->
            <div class="gallery-item">
                <img src="m1.jpg" alt="Memory 1">
            </div>
            <div class="gallery-item">
                <img src="m2.jpg" alt="Memory 2">
            </div>
            <div class="gallery-item">
                <img src="m3.jpg" alt="Memory 3">
            </div>
            <div class="gallery-item">
                <img src="m4.jpg" alt="Memory 4">
            </div>
            <div class="gallery-item">
                <img src="m5.jpg" alt="Memory 5">
            </div>
            <div class="gallery-item">
                <img src="m6.jpg" alt="Memory 6">
            </div>
        </div>
    </div>
    
    <!-- Special Message Box (hidden by default) -->
    <div class="message-box" id="specialMessage">
        <h2>To My Beautiful Girlfriend</h2>
        <p>Every day with you is a gift I cherish deeply.</p>
        <p>Your smile brightens my darkest days,</p>
        <p>Your laugh is my favorite melody,</p>
        <p>And your love is my greatest treasure.</p>
        <p>Happy Birthday to the woman who completes me!</p>
        <button class="btn" id="closeMessageBtn">Close</button>
    </div>
    
    <!-- Music Player -->
    <div class="music-player">
        <button id="playBtn">▶</button>
        <span>Perfect - Ed Sheeran</span>
        <audio id="bgMusic" loop>
            <source src="perfect.mp3" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio>
    </div>
    
    <script>
        // Create floating hearts
        function createHearts() {
            const heartsContainer = document.getElementById('hearts');
            for (let i = 0; i < 30; i++) {
                const heart = document.createElement('div');
                heart.classList.add('heart');
                heart.innerHTML = '❤';
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.animationDuration = 6 + Math.random() * 6 + 's';
                heart.style.animationDelay = Math.random() * 5 + 's';
                heart.style.fontSize = (1 + Math.random() * 2) + 'rem';
                heartsContainer.appendChild(heart);
            }
        }
        
        // Create falling hearts
        function createFallingHearts() {
            const container = document.getElementById('fallingHearts');
            container.innerHTML = '';
            
            for (let i = 0; i < 50; i++) {
                const heart = document.createElement('div');
                heart.classList.add('falling-heart');
                heart.innerHTML = '❤';
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.animationDuration = 3 + Math.random() * 3 + 's';
                heart.style.animationDelay = Math.random() * 2 + 's';
                heart.style.fontSize = (1 + Math.random() * 3) + 'rem';
                container.appendChild(heart);
            }
            
            setTimeout(() => {
                container.innerHTML = '';
            }, 5000);
        }
        
        // Create confetti
        function createConfetti() {
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
            const container = document.querySelector('body');
            
            for (let i = 0; i < 150; i++) {
                const confetti = document.createElement('div');
                confetti.classList.add('confetti');
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.top = '-10px';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.width = (5 + Math.random() * 10) + 'px';
                confetti.style.height = (5 + Math.random() * 10) + 'px';
                confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                confetti.style.animation = `confettiFall ${3 + Math.random() * 5}s linear forwards`;
                
                const keyframes = `
                    @keyframes confettiFall {
                        0% {
                            transform: translateY(0) rotate(0deg);
                            opacity: 1;
                        }
                        100% {
                            transform: translateY(100vh) rotate(${360 + Math.random() * 360}deg);
                            opacity: 0;
                        }
                    }
                `;
                
                const style = document.createElement('style');
                style.innerHTML = keyframes;
                document.head.appendChild(style);
                
                container.appendChild(confetti);
                
                setTimeout(() => {
                    confetti.remove();
                    style.remove();
                }, 8000);
            }
        }
        
        // Calculate time on Earth since May 5, 2006
        function updateTimeOnEarth() {
            const birthDate = new Date(2006, 4, 5);
            const now = new Date();
            
            let years = now.getFullYear() - birthDate.getFullYear();
            let months = now.getMonth() - birthDate.getMonth();
            let days = now.getDate() - birthDate.getDate();
            
            if (months < 0 || (months === 0 && days < 0)) {
                years--;
                months += 12;
            }
            
            if (days < 0) {
                const lastMonth = new Date(now.getFullYear(), now.getMonth() - 1, 1);
                days += new Date(lastMonth.getFullYear(), lastMonth.getMonth() + 1, 0).getDate();
                months--;
            }
            
            const diffTime = Math.abs(now - birthDate);
            const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
            
            document.getElementById('earthYears').textContent = years;
            document.getElementById('earthMonths').textContent = months;
            document.getElementById('earthDays').textContent = diffDays;
            document.getElementById('earthHours').textContent = Math.floor(diffTime / (1000 * 60 * 60));
        }
        
        // Music player functionality
        function setupMusicPlayer() {
            const audio = document.getElementById('bgMusic');
            const playBtn = document.getElementById('playBtn');
            let isPlaying = false;
            
            audio.volume = 0.5;
            const playPromise = audio.play();
            
            if (playPromise !== undefined) {
                playPromise.then(_ => {
                    isPlaying = true;
                    playBtn.textContent = '❚❚';
                })
                .catch(error => {
                    isPlaying = false;
                    playBtn.textContent = '▶';
                });
            }
            
            playBtn.addEventListener('click', () => {
                if (isPlaying) {
                    audio.pause();
                    playBtn.textContent = '▶';
                } else {
                    audio.play();
                    playBtn.textContent = '❚❚';
                }
                isPlaying = !isPlaying;
            });
        }
        
        // Event listeners
        document.getElementById('surpriseBtn').addEventListener('click', function(e) {
            e.preventDefault();
            createConfetti();
            createFallingHearts();
            
            const mainPhoto = document.getElementById('mainPhoto');
            mainPhoto.src = "sup.jpg";
            
            setTimeout(() => {
                mainPhoto.src = 'mainphoto.jpeg';
            }, 3000);
        });
        
        document.getElementById('memoriesBtn').addEventListener('click', function(e) {
            e.preventDefault();
            document.getElementById('memoryGallery').classList.toggle('active');
        });
        
        document.getElementById('messageBtn').addEventListener('click', function(e) {
            e.preventDefault();
            document.getElementById('specialMessage').classList.add('active');
        });
        
        document.getElementById('closeMessageBtn').addEventListener('click', function(e) {
            e.preventDefault();
            document.getElementById('specialMessage').classList.remove('active');
        });
        
        // Initialize
        window.onload = function() {
            createHearts();
            updateTimeOnEarth();
            setInterval(updateTimeOnEarth, 3600000);
            setupMusicPlayer();
            
            // Preload images
            const images = [
                'mainphoto.jpeg',
                'sup.jpg',
                'm1.jpg',
                'm2.jpg',
                'm3.jpg',
                'm4.jpg',
                'm5.jpg',
                'm6.jpg'
            ];
            
            images.forEach(src => {
                const img = new Image();
                img.src = src;
            });
        };
    </script>
</body>
</html>
